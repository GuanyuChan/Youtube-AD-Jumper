// ==UserScript==
// @name         广告拦截器
// @namespace    https://github.com/GuanyuChan/Youtube-AD-Jumper
// @version      2.0
// @description:zh-CN   这是一个去除YouTube广告的脚本，可以有效去除一定的广告
// @match        https://www.youtube.com/*
// @run-at       document-start
// @author       GuanyuChan
// ==/UserScript==

(function() {
    'use strict';

    // 监听页面加载事件，在页面加载之前拦截广告
    window.addEventListener('beforescriptexecute', function(event) {
        var scriptSource = event.target.src;
        if (isAdScript(scriptSource)) {
            event.preventDefault();
            event.stopPropagation();
            // 可以选择移除广告脚本
            event.target.remove();
        }
    }, true);

    // 判断是否为广告脚本
    function isAdScript(scriptSource) {
        // 在这里根据广告脚本的特征判断是否为广告
        // 例如，可以使用脚本的 URL、脚本内容等来识别广告
        // 返回 true 表示是广告脚本，返回 false 表示不是广告脚本
        if (scriptSource.includes('ads.js')) {
            return true;
        }
        return false;
    }

    // 监听 DOMContentLoaded 事件，在页面加载完成后进一步处理
    document.addEventListener('DOMContentLoaded', function() {
        var adElements = document.querySelectorAll('.ad');
        adElements.forEach(function(element) {
            element.remove();
        });
    });
})();
