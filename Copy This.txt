// ==UserScript==
// @name         Youtube 广告拦截小工具
// @namespace    https://github.com/GuanyuChan/Youtube-AD-Jumper
// @version      v1.6
// @description  去除YouTube广告
// @license      GPL-3.0-or-later
// @author       GuanyuChan
// @match        *://*.youtube.com/*
// @homepageURL  https://github.com/GuanyuChan/Youtube-AD-Jumper
// @downloadURL  https://github.com/GuanyuChan/Youtube-AD-Jumper/raw/main/youtube-ad-jumper.user.js
// @run-at       document-idle 
// ==/UserScript==

// Config and common functions
const config = getConfig();
const adSelector = config.adSelector;

function report(error) {
  // create GitHub issue
}

function main() {

  try {

    // Event listeners 

    window.addEventListener('beforescriptexecute', handler);

    document.addEventListener('DOMContentLoaded', async () => {

      let ad;
      while (ad = document.querySelector(adSelector)) {
        await removeAd(ad);  
      }

    });

  } catch (error) {
    report(error);
  }

}

// Specific functions 
function handler() {
  //...
}

function removeAd() {
  //...  
}

main();
